## 进程管理

1. 服务模型的变迁
   - 同步模型-单进程
   - 进程复制
   - 多线程
   - 事件驱动

> 单线程的优势：可以减少不必要的内存开销和上下文切换开销；
> 单线程的劣势：不能充分利用多核 CPU 的能力，同时在稳定性和健壮性上不够；

> 事件驱动的服务模型（如 Node，Nginx），主要为例解决高并发问题，方式是通过事件驱动的方式；

2. Node 的事件驱动服务模型架构

可以理解 Node 服务模型架构是基于事件驱动的多进程管理；

- 事件驱动--提升了对高并发的处理方式；
- 合理的多进程管理--充分利用多核 CPU 的能力，同时提升稳定性，健壮性和可伸缩性；

Node 多进程结构的模式：
主从模式---Master-Worker 模式

- 一个 master 主进程：管理整个服务，不处理具体的业务；
- 多子进程：由 master 分配，处理各项具体的业务；

这其中就涉及到进程的创建和进程的通信；（Node 这里是主从进程才建立 IPC 通信；）

3. 创建子进程  
   Node 中通过 child_process 模块提供创建子进程能力：
   主要通过 4 个方法：

- spaw()：创建一个子进程来**执行命令，不支持回调**；
- exec()：创建一个子进程来**执行命令，但是支持通过传递回调函数的方式来获知子进程状况**；
- execFile()：创建一个子进程来**执行可执行文件，支持回调**；
- fork()：创建一个子进程来**执行 Js 文件模块,不支持回调**

4 种方式的差异：  
|类型|回调/异常|进程类型|执行类型|可设置超时|  
|---|---|---|---|---|
|spaw()|NO|任意| 命令|NO|
|exec()|Yes|任意| 命令|Yes|
|execFile()|Yes|任意|可执行文件|Yes|
|fork()|NO|Node 类型| Js 文件|NO|

-- todo--
